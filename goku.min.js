!function(t){"use strict";function e(t){if(!t)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(){return"goku-"+r++}function n(t){if(!t)throw new Error("Goku: no argument");if("string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("Goku: no element found");if(a[t.dataset.gokuId])return a[t.dataset.gokuId];var n=i();return t.dataset.gokuId=n,a[n]=new Transition(t,{id:n,onstart:function(){o||(console.log("goku.js: start animation loop"),o=u(s))},oncomplete:function(t){var i=t.dataset.gokuId;delete t.dataset.gokuId,delete a[i],e(a)&&(console.log("goku.js: complete animation loop"),h(o),o=null)}}),a[n]}function s(t){o=u(s);for(var e in a)a[e].step&&a[e].step(t)}var o,a={},r=0,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){window.clearTimeout(t)};t.goku=n}(window),function(t){"use strict";function e(t,e){e=e||{},this.element=t,this.id=e.id,this.onstart=e.onstart,this.oncomplete=e.oncomplete,this.queue=[],this.timings=[],this.playingIndex=-1,this.elapsedTime=0,this.lastTimestamp=0,this.isPaused=!1,this.pausingIndex=-1,this.promiseQueue=[],this.animate=this.animate.bind(this),this.delay=this.delay.bind(this),this.pause=this.pause.bind(this)}var i=400,n="ease";e.prototype={_generatePromiseTask:function(){var t={},e=new Promise(function(e,i){t.resolve=e,t.reject=i});return e.animate=this.animate,e.delay=this.delay,e.pause=this.pause,t.promise=e,t},_generateTransform:function(t,e){var i=getComputedStyle(t).transform;t.style.transform="none"===i?e:i+" "+e},_generateTransformByMatrix:function(){},addClass:function(){},animate:function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw new Error("Goku: missing arguments!");if("string"==typeof t[0])throw new Error("Goku: implement this!");if("object"==typeof t[0]){var e=t[0],s=t[1]||{},o=[];for(var a in e)o.push(a);var r=o.join(" "),u=s.duration||i;this.timings.push(u);var h=this,l={properties:e,options:s,start:function(){h.element.style.transitionProperty=r,h.element.style.transitionDuration=u+"ms",h.element.style.transitionTimingFunction=s.easing||n,h.element.offsetWidth;for(var t in e)h.element.style[t]="transform"===t?e[t]:e[t];s.start&&s.start()}};this.queue.push(l),1===this.queue.length&&this.onstart();var m=this._generatePromiseTask();return this.promiseQueue.push(m),m.promise}},delay:function(t){if(console.log(this.id,"delay"),!(t>0))throw new Error("Goku: missing arguments!");this.queue.push({}),this.timings.push(t),1===this.queue.length&&this.onstart();var e=this._generatePromiseTask();return this.promiseQueue.push(e),e.promise},pause:function(){return console.log(this.id,"pause"),this.isPaused=!0,this},play:function(){return console.log(this.id,"play"),this.isPaused=!1,this.promiseQueue[this.playingIndex].promise},reset:function(){},next:function(){},end:function(){return this},step:function(t){if(!this.isPaused&&this.lastTimestamp&&(this.elapsedTime+=t-this.lastTimestamp),this.lastTimestamp=t,-1===this.playingIndex)return void this._next();if(!(this.isPaused&&this.pausingIndex>-1)){var e,i,n;if(this.isPaused&&this.pausingIndex<0){this.pausingIndex=this.playingIndex;var s=getComputedStyle(this.element);e=this.queue[this.playingIndex],i=e.properties;for(n in i)this.element.style[n]=s[n]}else if(!this.isPaused&&this.pausingIndex>-1){this.pausingIndex=-1,e=this.queue[this.playingIndex],i=e.properties;for(n in i)this.element.style[n]=i[n]}else if(this.elapsedTime>this.timings[this.playingIndex]){e=this.queue[this.playingIndex],e.options&&"function"==typeof e.options.complete&&e.options.complete();var o=this.promiseQueue[this.playingIndex];o.resolve(),this._next()}}},_next:function(){if(this.playingIndex+=1,this.queue[this.playingIndex]){console.log(this.id,"next");var t=this.queue[this.playingIndex];t.options&&"function"==typeof t.options.before&&t.options.before(),t.start&&"function"==typeof t.start&&t.start(),this.elapsedTime=0,this.lastTimestamp=0}else console.log(this.id,"end"),this._clear(),this.oncomplete(this.element)},_clear:function(){console.log(this.id,"clear"),this.playingIndex=-1,this.queue.length=0,this.timings.length=0,this.elapsedTime=0,this.lastTimestamp=0}},t.Transition=e}(window);
//# sourceMappingURL=maps/goku.min.js.map